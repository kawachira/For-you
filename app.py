# 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠
!pip install yfinance pandas_ta --quiet

import yfinance as yf
import pandas as pd
import pandas_ta as ta

# ==========================================
# ‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (AMZN)
# ==========================================
symbol = "eose"        # ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏ô
timeframe = "1d"       # ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
period = "max"         # ‡∏î‡∏∂‡∏á‡∏¢‡∏≤‡∏ß‡∏™‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ EMA
# ==========================================

print(f"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ {symbol} ({timeframe})...")

# 2. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
df = yf.download(symbol, period=period, interval=timeframe, progress=False)

if len(df) > 0:
    # ‡πÅ‡∏Å‡πâ‡∏ö‡∏±‡πä‡∏Å‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á
    if isinstance(df.columns, pd.MultiIndex):
        df.columns = df.columns.get_level_values(0)

    # 3. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏¥‡∏ô‡∏î‡∏¥‡πÄ‡∏Ñ‡πÄ‡∏ï‡∏≠‡∏£‡πå
    df['EMA20']  = ta.ema(df['Close'], length=20)
    df['EMA50']  = ta.ema(df['Close'], length=50)
    df['EMA200'] = ta.ema(df['Close'], length=200)
    df['RSI'] = ta.rsi(df['Close'], length=14)
    
    # MACD & Signal
    macd = ta.macd(df['Close'])
    df['MACD'] = macd.iloc[:, 0]
    df['SIGNAL'] = macd.iloc[:, 2]

    # Bollinger Bands
    bb = ta.bbands(df['Close'], length=20, std=2)
    df['BB_LOWER'] = bb.iloc[:, 0]
    df['BB_UPPER'] = bb.iloc[:, 2]
    
    # Volume SMA
    df['VOL_SMA'] = ta.sma(df['Volume'], length=20)

    # 4. ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
    last = df.iloc[-1]
    prev = df.iloc[-2]
    price = last['Close']
    prev_close = prev['Close']
    
    # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì % Change
    change_val = price - prev_close
    change_pct = (change_val / prev_close) * 100
    change_sign = "+" if change_val >= 0 else ""
    change_emoji = "üü¢" if change_val >= 0 else "üî¥"

    # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å EMA 200
    ema200_val = last['EMA200']
    diff_ema200 = price - ema200_val
    diff_ema200_pct = (diff_ema200 / ema200_val) * 100
    
    if diff_ema200_pct < 0:
        ema200_status = f"üîª ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏™‡πâ‡∏ô 200 ‡∏ß‡∏±‡∏ô {abs(diff_ema200_pct):.2f}%"
    else:
        ema200_status = f"‚úÖ ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏™‡πâ‡∏ô 200 ‡∏ß‡∏±‡∏ô {diff_ema200_pct:.2f}%"

    # ==============================================================================
    # üß† SMART SUPPORT LOGIC (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà: ‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô/‡∏Ç‡∏≤‡∏•‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô)
    # ==============================================================================
    if price > last['EMA200']:
        # üü¢ ‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô (Uptrend): ‡πÉ‡∏ä‡πâ EMA ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Dynamic Support ‡πÅ‡∏Ç‡πá‡∏á‡∏Å‡∏ß‡πà‡∏≤)
        sup1 = last['EMA20']
        sup1_desc = "(‡πÄ‡∏™‡πâ‡∏ô EMA 20 - ‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö‡∏ã‡∏¥‡πà‡∏á)"
        
        sup2 = last['EMA50']
        sup2_desc = "(‡πÄ‡∏™‡πâ‡∏ô EMA 50 - ‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏Å)"
        
        sup3 = last['EMA200']
        sup3_desc = "(‡πÄ‡∏™‡πâ‡∏ô EMA 200 - ‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢)"
        
        sup_source = "(‡πÉ‡∏ä‡πâ‡πÄ‡∏™‡πâ‡∏ô EMA ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡πÉ‡∏ô‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô)"
        
        # ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏∏‡∏î‡∏•‡∏á‡πÑ‡∏õ (‡∏°‡∏≤‡∏Å -> ‡∏ô‡πâ‡∏≠‡∏¢)
        supports = sorted([sup1, sup2, sup3], reverse=True)
        
    else:
        # üî¥ ‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡∏≤‡∏•‡∏á (Downtrend): EMA ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß -> ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ê‡∏≤‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏î‡∏¥‡∏° (Structure Low)
        # ‡∏´‡∏≤ Swing Low ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏à‡∏∏‡∏î‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)
        recent_low = df['Low'].tail(60).min()
        
        # ‡∏´‡∏≤ 52-Week Low (‡∏à‡∏∏‡∏î‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏£‡∏≠‡∏ö 1 ‡∏õ‡∏µ)
        year_low = df['Low'].tail(252).min()
        
        # ‡∏´‡∏≤ All-Time Low (‡∏à‡∏∏‡∏î‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡∏ï‡∏•‡∏≠‡∏î‡∏Å‡∏≤‡∏•)
        all_time_low = df['Low'].min()
        
        sup1 = recent_low
        sup1_desc = "(Swing Low ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)"
        
        sup2 = year_low
        sup2_desc = "(52-Week Low)"
        
        sup3 = all_time_low
        sup3_desc = "(All-Time Low)"
        
        sup_source = "(‡πÉ‡∏ä‡πâ‡∏ê‡∏≤‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏î‡∏¥‡∏° Low ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏´‡∏•‡∏∏‡∏î EMA)"
        
        # ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏∏‡∏î‡∏•‡∏á‡πÑ‡∏õ (‡∏°‡∏≤‡∏Å -> ‡∏ô‡πâ‡∏≠‡∏¢)
        # ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡πà‡∏≤‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô (‡πÄ‡∏ä‡πà‡∏ô Recent Low = Year Low)
        unique_sups = sorted(list(set([sup1, sup2, sup3])), reverse=True)
        # ‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 3 ‡∏Ñ‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÑ‡∏°‡πà‡∏û‡∏≠
        while len(unique_sups) < 3:
            unique_sups.append(0)
            
        supports = unique_sups
        
        # Update ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà
        def get_desc(val):
            if val == recent_low: return "(Swing Low ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)"
            if val == year_low: return "(52-Week Low)"
            if val == all_time_low: return "(All-Time Low)"
            return ""
            
        sup1, sup2, sup3 = supports[0], supports[1], supports[2]
        sup1_desc = get_desc(sup1)
        sup2_desc = get_desc(sup2)
        sup3_desc = get_desc(sup3)

    res_main = df['High'].tail(60).max()

    # 5. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• Dashboard
    print("\n" + "‚ïê"*60)
    print(f"üíé SUPER DASHBOARD: {symbol} ({timeframe})")
    print(f"üïí ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: {df.index[-1].strftime('%d/%m/%Y')}")
    print("‚ïê"*60)
    
    # --- ‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå ---
    print(f"üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:      {price:.2f} {change_emoji} ({change_sign}{change_val:.2f} / {change_sign}{change_pct:.2f}%)")
    print(f"‚èÆÔ∏è ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤: {prev_close:.2f}")
    
    if price > last['EMA200']:
        print("üìà ‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏´‡∏•‡∏±‡∏Å:       ‚úÖ ‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô (Bullish)")
        print(f"   ({ema200_status})")
    else:
        print("üìâ ‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏´‡∏•‡∏±‡∏Å:       üîª ‡∏Ç‡∏≤‡∏•‡∏á (Bearish)")
        print(f"   ({ema200_status})")
        
    print("-" * 60)

    # --- ‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤ EMA ---
    print("üåä ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏™‡πâ‡∏ô EMA (Reality Check):")
    def check_ema(p, ema, name):
        if p >= ema: return f"   ‚úÖ {name} ({ema:.2f}): ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô '‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö' (Support)"
        else: return f"   ‚ùå {name} ({ema:.2f}): ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô '‡πÅ‡∏ô‡∏ß‡∏ï‡πâ‡∏≤‡∏ô' (Resistance)"

    print(check_ema(price, last['EMA20'], "EMA 20"))
    print(check_ema(price, last['EMA50'], "EMA 50"))
    print(check_ema(price, last['EMA200'], "EMA 200"))
    print("-" * 60)
    
    # --- RSI ---
    print(f"‚ö° RSI (14):     {last['RSI']:.2f}", end=" ")
    if last['RSI'] > 70: print("üî¥ Overbought (‡πÅ‡∏û‡∏á/‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏¢‡πà‡∏≠)")
    elif last['RSI'] < 30: print("üü¢ Oversold (‡∏ñ‡∏π‡∏Å/‡∏•‡∏∏‡πâ‡∏ô‡πÄ‡∏î‡πâ‡∏á)")
    elif last['RSI'] > 50: print("üîµ Bullish Zone (‡πÅ‡∏£‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏∏‡∏°‡∏ï‡∏•‡∏≤‡∏î)")
    else: print("‚ö™ Bearish Zone (‡πÅ‡∏£‡∏á‡∏Ç‡∏≤‡∏¢‡∏Ñ‡∏∏‡∏°‡∏ï‡∏•‡∏≤‡∏î)")
    print("-" * 60)

    # --- Support / Resistance ---
    print(f"üöß ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î (Support & Resistance)")
    print(f"   üî¥ ‡πÅ‡∏ô‡∏ß‡∏ï‡πâ‡∏≤‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:  {res_main:.2f}")
    if price < last['EMA200']:
        print(f"   üî¥ ‡πÅ‡∏ô‡∏ß‡∏ï‡πâ‡∏≤‡∏ô EMA:   {last['EMA200']:.2f} (‡πÄ‡∏™‡πâ‡∏ô 200 ‡∏ß‡∏±‡∏ô)")
    print(f"        |")
    print(f"      (‡∏£‡∏≤‡∏Ñ‡∏≤)      {price:.2f}")
    print(f"        |")
    
    if price > last['EMA200']:
        # ‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏™‡∏î‡∏á EMA 3 ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß
        print(f"   üü¢ ‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö 1:      {supports[0]:.2f} {sup1_desc}")
        print(f"   üü¢ ‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö 2:      {supports[1]:.2f} {sup2_desc}")
        print(f"   üü¢ ‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö 3:      {supports[2]:.2f} {sup3_desc}")
    else:
        # ‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡∏≤‡∏•‡∏á ‡πÅ‡∏™‡∏î‡∏á Low ‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß
        print(f"   üü¢ ‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö 1:      {sup1:.2f} {sup1_desc}")
        print(f"   üü¢ ‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö 2:      {sup2:.2f} {sup2_desc}")
        print(f"   üü¢ ‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö 3:      {sup3:.2f} {sup3_desc}")
        
    print(f"   {sup_source}")
    
    print("‚ïê"*60)
    
    # =================================================================
    # üß† AI INTELLIGENT REPORT (‡∏™‡πà‡∏ß‡∏ô‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)
    # =================================================================
    print("ü§ñ AI INTELLIGENT REPORT (‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å):")
    
    # -------------------------------------------------------------
    # 1. AI TECHNICAL ANALYSIS
    # -------------------------------------------------------------
    print("\n   üß† 1. ‡∏ö‡∏ó‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ (AI Technical Analysis):")
    
    if price > last['EMA200']:
        if price < last['EMA50']:
            print("      - **‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á:** ‡∏´‡∏∏‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô (Uptrend) ‡πÅ‡∏ï‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á '‡∏û‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡∏•‡∏∂‡∏Å' (Correction)")
            print("      - **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏•‡∏á‡∏°‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö EMA 50 ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á")
        elif price > last['EMA20']:
             print("      - **‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á:** ‡∏´‡∏∏‡πâ‡∏ô‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡∏°‡∏≤‡∏Å (Strong Uptrend) ‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Å‡∏≤‡∏∞‡πÄ‡∏™‡πâ‡∏ô 20 ‡∏ß‡∏±‡∏ô")
             print("      - **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡∏î‡∏∏! ‡πÅ‡∏£‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á")
        else:
             print("      - **‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á:** ‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡∏∞‡∏•‡∏≠‡∏ï‡∏±‡∏ß (Slowing Momentum) ‡∏´‡∏•‡∏∏‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ã‡∏¥‡πà‡∏á (EMA20)")
    else:
        # ‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡∏≤‡∏•‡∏á
        if last['RSI'] < 30:
            print("      - **‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á:** ‡∏Ç‡∏≤‡∏•‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏ï‡∏±‡∏ß (Downtrend) ‡πÅ‡∏ï‡πà‡∏£‡∏≤‡∏Ñ‡∏≤‡∏•‡∏á‡∏•‡∏∂‡∏Å‡∏à‡∏ô '‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ' (Oversold)")
            print("      - **‡πÇ‡∏≠‡∏Å‡∏≤‡∏™:** ‡πÅ‡∏£‡∏á‡∏Ç‡∏≤‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏°‡∏î (Selling Climax) ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏î‡πâ‡∏á‡πÅ‡∏£‡∏á‡πÜ ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠")
        elif price > last['EMA20']:
            print("      - **‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á:** ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Ç‡∏≤‡∏•‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ü‡∏∑‡πâ‡∏ô‡∏ï‡∏±‡∏ß (Recovery attempt)")
            print("      - **‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì:** ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏¢‡∏∑‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡πÄ‡∏™‡πâ‡∏ô 20 ‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ ‡∏•‡∏∏‡πâ‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏£‡∏∞‡∏¢‡∏∞‡∏™‡∏±‡πâ‡∏ô")
        else:
            print("      - **‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á:** ‡∏Ç‡∏≤‡∏•‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö (Bear Market) ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏Å‡πâ‡∏ô‡πÄ‡∏´‡∏ß")
            print("      - **‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡∏±‡∏°:** ‡πÅ‡∏£‡∏á‡∏Ç‡∏≤‡∏¢‡∏¢‡∏±‡∏á‡∏Å‡∏î‡∏î‡∏±‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏•‡∏á‡∏ï‡πà‡∏≠")

    # -------------------------------------------------------------
    # 2. DAILY CONTEXT (‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô)
    # -------------------------------------------------------------
    print("\n   üìö 2. ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (Daily Context):")
    
    if price < last['EMA200']:
        print(f"      - ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: ‡∏´‡∏∏‡πâ‡∏ô‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏õ‡πà‡∏ß‡∏¢‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ‡πÄ‡∏™‡πâ‡∏ô 200 ‡∏ß‡∏±‡∏ô ({abs(diff_ema200_pct):.2f}%)")
        print(f"      - ‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏¢‡∏±‡∏á **'‡πÑ‡∏°‡πà‡∏Å‡∏•‡πâ‡∏≤'** ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏•‡∏±‡∏ß‡∏£‡∏±‡∏ö‡∏°‡∏µ‡∏î")
        
        if last['RSI'] < 40:
             print("      - ‡πÅ‡∏ï‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏Å‡πá‡∏á‡∏Å‡∏≥‡πÑ‡∏£ RSI ‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≥‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì **'‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á'** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡πâ‡∏á‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ")
        else:
             print("      - ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏¢‡∏±‡∏á‡∏î‡∏π‡∏≠‡∏∂‡∏°‡∏Ñ‡∏£‡∏∂‡∏° ‡∏£‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ö‡∏ß‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÜ ‡∏°‡∏≤‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô")
    else:
        # ‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô
        if price < last['EMA50']:
             print("      - ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á **'‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏≠‡∏á'** ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏ï‡∏Å‡∏£‡∏ñ")
             print("      - ‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏•‡∏á‡∏°‡∏≤‡∏´‡∏≤ EMA 50 ‡∏Ñ‡∏∑‡∏≠‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏´‡∏∏‡πâ‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏î‡∏£‡∏≤‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡∏≠‡∏≠‡∏Å")
        else:
             print("      - ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: ‡∏´‡∏∏‡πâ‡∏ô‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≠‡∏° ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏Å‡πá‡∏ô‡∏±‡πà‡∏á‡∏¢‡∏¥‡πâ‡∏° ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏¢‡πà‡∏≠‡∏ã‡∏∑‡πâ‡∏≠")

    # -------------------------------------------------------------
    # 3. ACTION PLAN (‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏â‡∏•‡∏≤‡∏î)
    # -------------------------------------------------------------
    print("\n   ‚úÖ 3. ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥ (Action Plan):")
    
    if price > last['EMA200']:
        # ‡πÅ‡∏ú‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô
        if price < last['EMA50']:
             print("      üü¢ **‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå: Buy on Dip (‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß)**")
             print(f"         1. ‡∏ó‡∏¢‡∏≠‡∏¢‡πÑ‡∏°‡πâ‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö **EMA 50 ({last['EMA50']:.2f})**")
             print(f"         2. ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πâ‡∏™‡∏≠‡∏á‡∏ó‡∏µ‡πà **EMA 200 ({last['EMA200']:.2f})** (Safety Zone)")
             print("         3. ‡∏ñ‡∏∑‡∏≠‡∏£‡∏±‡∏ô‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏¢‡∏≤‡∏ß‡πÜ ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏´‡∏•‡∏∏‡∏î‡πÄ‡∏™‡πâ‡∏ô 200 ‡∏ß‡∏±‡∏ô")
        else:
             print("      üü° **‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå: Let Profit Run**")
             print("         1. ‡∏ñ‡∏∑‡∏≠‡∏ï‡πà‡∏≠ (Hold) ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏£‡∏µ‡∏ö‡∏Ç‡∏≤‡∏¢")
             print(f"         2. ‡πÉ‡∏ä‡πâ‡πÄ‡∏™‡πâ‡∏ô **EMA 20 ({last['EMA20']:.2f})** ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î Trailing Stop")
    else:
        # ‡πÅ‡∏ú‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏•‡∏á
        if last['RSI'] < 30:
             print("      ‚ö° **‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå: Sniper Bounce (‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏î‡πâ‡∏á‡∏™‡∏±‡πâ‡∏ô)**")
             print(f"         1. ‡∏£‡∏≠‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö **{sup1:.2f}** (Swing Low)")
             print("         2. ‡πÄ‡∏õ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏ô‡∏ß‡∏ï‡πâ‡∏≤‡∏ô EMA 20 ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠ RSI ‡πÅ‡∏ï‡∏∞ 50")
             print(f"         3. üõë **Stop Loss:** ‡∏´‡∏•‡∏∏‡∏î **{sup1:.2f}** ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏±‡∏ó‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏´‡πâ‡∏≤‡∏°‡∏¢‡∏∑‡πâ‡∏≠")
        elif price < last['EMA20']:
             print("      ‚õî **‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå: Wait & See (‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏±‡∏ö‡∏°‡∏∑‡∏≠)**")
             print("         1. ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≤‡∏•‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á")
             print(f"         2. ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏¢‡∏∑‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ **{last['EMA20']:.2f}** ‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏≠‡∏á")
        else:
             print("      üü† **‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå: Sell on Rise (‡πÄ‡∏î‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≤‡∏¢)**")
             print("         1. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏î‡∏≠‡∏¢ ‡∏´‡∏≤‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏•‡∏î‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ä‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡πâ‡∏≤‡∏ô EMA")
             print("         2. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏á ‡∏£‡∏≠ Breakout EMA 50 ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢")

else:
    print("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏∏‡πâ‡∏ô")
